let rating = 0;

function star1() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('show');
  star1Empty.classList.add('hide');
  star1Full.classList.remove('hide');
  star1Full.classList.add('show');

  star2Empty.classList.remove('hide');
  star2Empty.classList.add('show');
  star2Full.classList.remove('show');
  star2Full.classList.add('hide');

  star3Empty.classList.remove('hide');
  star3Empty.classList.add('show');
  star3Full.classList.remove('show');
  star3Full.classList.add('hide');

  star4Empty.classList.remove('hide');
  star4Empty.classList.add('show');
  star4Full.classList.remove('show');
  star4Full.classList.add('hide');

  star5Empty.classList.remove('hide');
  star5Empty.classList.add('show');
  star5Full.classList.remove('show');
  star5Full.classList.add('hide');
}

function star2() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('show');
  star1Empty.classList.add('hide');
  star1Full.classList.remove('hide');
  star1Full.classList.add('show');

  star2Empty.classList.remove('show');
  star2Empty.classList.add('hide');
  star2Full.classList.remove('hide');
  star2Full.classList.add('show');

  star3Empty.classList.remove('hide');
  star3Empty.classList.add('show');
  star3Full.classList.remove('show');
  star3Full.classList.add('hide');

  star4Empty.classList.remove('hide');
  star4Empty.classList.add('show');
  star4Full.classList.remove('show');
  star4Full.classList.add('hide');

  star5Empty.classList.remove('hide');
  star5Empty.classList.add('show');
  star5Full.classList.remove('show');
  star5Full.classList.add('hide');
}

function star3() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('show');
  star1Empty.classList.add('hide');
  star1Full.classList.remove('hide');
  star1Full.classList.add('show');

  star2Empty.classList.remove('show');
  star2Empty.classList.add('hide');
  star2Full.classList.remove('hide');
  star2Full.classList.add('show');

  star3Empty.classList.remove('show');
  star3Empty.classList.add('hide');
  star3Full.classList.remove('hide');
  star3Full.classList.add('show');

  star4Empty.classList.remove('hide');
  star4Empty.classList.add('show');
  star4Full.classList.remove('show');
  star4Full.classList.add('hide');

  star5Empty.classList.remove('hide');
  star5Empty.classList.add('show');
  star5Full.classList.remove('show');
  star5Full.classList.add('hide');
}

function star4() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('show');
  star1Empty.classList.add('hide');
  star1Full.classList.remove('hide');
  star1Full.classList.add('show');

  star2Empty.classList.remove('show');
  star2Empty.classList.add('hide');
  star2Full.classList.remove('hide');
  star2Full.classList.add('show');

  star3Empty.classList.remove('show');
  star3Empty.classList.add('hide');
  star3Full.classList.remove('hide');
  star3Full.classList.add('show');

  star4Empty.classList.remove('show');
  star4Empty.classList.add('hide');
  star4Full.classList.remove('hide');
  star4Full.classList.add('show');

  star5Empty.classList.remove('hide');
  star5Empty.classList.add('show');
  star5Full.classList.remove('show');
  star5Full.classList.add('hide');
}

function star5() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('show');
  star1Empty.classList.add('hide');
  star1Full.classList.remove('hide');
  star1Full.classList.add('show');

  star2Empty.classList.remove('show');
  star2Empty.classList.add('hide');
  star2Full.classList.remove('hide');
  star2Full.classList.add('show');

  star3Empty.classList.remove('show');
  star3Empty.classList.add('hide');
  star3Full.classList.remove('hide');
  star3Full.classList.add('show');

  star4Empty.classList.remove('show');
  star4Empty.classList.add('hide');
  star4Full.classList.remove('hide');
  star4Full.classList.add('show');

  star5Empty.classList.remove('show');
  star5Empty.classList.add('hide');
  star5Full.classList.remove('hide');
  star5Full.classList.add('show');
}

function star0() {
  const star1Empty = document.getElementById(`star1-empty`);
  const star1Full = document.getElementById(`star1-full`);
  const star2Empty = document.getElementById(`star2-empty`);
  const star2Full = document.getElementById(`star2-full`);
  const star3Empty = document.getElementById(`star3-empty`);
  const star3Full = document.getElementById(`star3-full`);
  const star4Empty = document.getElementById(`star4-empty`);
  const star4Full = document.getElementById(`star4-full`);
  const star5Empty = document.getElementById(`star5-empty`);
  const star5Full = document.getElementById(`star5-full`);

  star1Empty.classList.remove('hide');
  star1Empty.classList.add('show');
  star1Full.classList.remove('show');
  star1Full.classList.add('hide');

  star2Empty.classList.remove('hide');
  star2Empty.classList.add('show');
  star2Full.classList.remove('show');
  star2Full.classList.add('hide');

  star3Empty.classList.remove('hide');
  star3Empty.classList.add('show');
  star3Full.classList.remove('show');
  star3Full.classList.add('hide');

  star4Empty.classList.remove('hide');
  star4Empty.classList.add('show');
  star4Full.classList.remove('show');
  star4Full.classList.add('hide');

  star5Empty.classList.remove('hide');
  star5Empty.classList.add('show');
  star5Full.classList.remove('show');
  star5Full.classList.add('hide');
}

function starClicked(stars) {
  for (let i = 1; i <= 5; i++) {
    let element = document.querySelector(`.star${i}`);
    element.removeAttribute("onmouseleave");
  }
  rating = stars;
}

function rate(recipeId) {
  const formData = new FormData();

  formData.append('recipeId', recipeId);
  formData.append('rating', rating);

  fetch("/ratings", {
    method: "POST",
    body: formData
  })
  .then(response => response.json())
  .then(data => {
    const userRating = document.getElementById('userRating');
    userRating.textContent = data.userRating;
  });

  closeModal();
}

function unrate(recipeId) {
  const formData = new FormData();

  formData.append('recipeId', recipeId);
  formData.append('_method', "DELETE");

  fetch("/ratings", {
    method: "POST",
    body: formData
  })
  .then(data => {
    const userRating = document.getElementById('userRating');
    userRating.textContent = '';
  });

  closeModal();
}

function closeModal() {
  var modal = document.getElementById('exampleModal');
  var modalInstance = bootstrap.Modal.getInstance(modal);
  modalInstance.hide();
}